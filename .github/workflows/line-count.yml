name: Count Lines of Code

on:
  workflow_dispatch:

jobs:
  count-loc:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Count Lines of Code
        id: loc
        run: |
          LOC=$(find . -name '*.py' | xargs cat | wc -l)
          echo "::set-output name=lines_of_code::$LOC"

      - name: Replace Line Count Placeholder
        run: |
          sed -i "s/{{LOCCOUNT}}/${{ steps.loc.outputs.lines_of_code }}/g" README.md